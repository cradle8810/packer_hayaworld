---
name: Hayaworld Packer VM Image Check
on:
  push:
    branches:
      - '**'
  workflow_dispatch:

jobs:
  Validate:
    runs-on: self-hosted
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Run Packer Validate
        run: |
          packer validate \
            --var-file=./variables.json \
            -var "vcenter_server_password=${{ secrets.VCSA_PASSWORD }}" \
            ubuntu-22.04.json

  Is_vCSA_Active:
    runs-on: self-hosted
    steps:
      - name: Run Packer Validate
        run: |
          ping -c 2 vcsa.hayaworld.home 
